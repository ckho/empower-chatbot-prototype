{"version":3,"sources":["../src/app.js"],"names":["BootBot","require","echoModule","helpModule","console","log","process","env","bot","accessToken","access_token","verifyToken","verify_token","appSecret","app_secret","module","askName","convo","ask","payload","data","text","message","set","say","then","askFavoriteFood","askGender","buttons","type","title","sendButtonTemplate","askAge","event","callback","pattern","get","end","hear","chat","conversation","sendTypingIndicator","typing","quickReplies","attachment","url","start"],"mappings":"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","file":"app.js","sourcesContent":["'use strict';\nconst BootBot = require('bootbot');\nconst echoModule = require('./modules/echo');\nconst helpModule = require('./modules/echo');\n\nconsole.log(process.env);\n\nconst bot = new BootBot({\n  accessToken: process.env.access_token,\n  verifyToken: process.env.verify_token,\n  appSecret: process.env.app_secret\n});\n\nbot.module(echoModule);\nbot.module(helpModule);\n\nconst askName = (convo) => {\n  convo.ask(`Hello! What's your name?`, (payload, convo, data) => {\n    const text = payload.message.text;\n    convo.set('name', text);\n    convo.say(`Oh, your name is ${text}`).then(() => askFavoriteFood(convo));\n  });\n};\n\nconst askFavoriteFood = (convo) => {\n  convo.ask(`What's your favorite food?`, (payload, convo, data) => {\n    const text = payload.message.text;\n    convo.set('food', text);\n    convo.say(`Got it, your favorite food is ${text}`).then(() => askGender(convo));\n  });\n};\n\nconst askGender = (convo) => {\n  convo.ask((convo) => {\n    const buttons = [\n      { type: 'postback', title: 'Male', payload: 'GENDER_MALE' },\n      { type: 'postback', title: 'Female', payload: 'GENDER_FEMALE' },\n      { type: 'postback', title: 'I don\\'t wanna say', payload: 'GENDER_UNKNOWN' }\n    ];\n    convo.sendButtonTemplate(`Are you a boy or a girl?`, buttons);\n  }, (payload, convo, data) => {\n    const text = payload.message.text;\n    convo.set('gender', text);\n    convo.say(`Great, you are a ${text}`).then(() => askAge(convo));\n  }, [\n    {\n      event: 'postback',\n      callback: (payload, convo) => {\n        convo.say('You clicked on a button').then(() => askAge(convo));\n      }\n    },\n    {\n      event: 'postback:GENDER_MALE',\n      callback: (payload, convo) => {\n        convo.say('You said you are a Male').then(() => askAge(convo));\n      }\n    },\n    {\n      event: 'quick_reply',\n      callback: () => {}\n    },\n    {\n      event: 'quick_reply:COLOR_BLUE',\n      callback: () => {}\n    },\n    {\n      pattern: ['yes', /yea(h)?/i, 'yup'],\n      callback: () => {\n        convo.say('You said YES!').then(() => askAge(convo));\n      }\n    }\n  ]);\n};\n\nconst askAge = (convo) => {\n  convo.ask(`Final question. How old are you?`, (payload, convo, data) => {\n    const text = payload.message.text;\n    convo.set('age', text);\n    convo.say(`That's great!`).then(() => {\n      convo.say(`Ok, here's what you told me about you:\n      - Name: ${convo.get('name')}\n      - Favorite Food: ${convo.get('food')}\n      - Gender: ${convo.get('gender')}\n      - Age: ${convo.get('age')}\n      `);\n      convo.end();\n    });\n  });\n};\n\nbot.hear('hello', (payload, chat) => {\n  chat.conversation((convo) => {\n    convo.sendTypingIndicator(1000).then(() => askName(convo));\n  });\n});\n\nbot.hear('hey', (payload, chat) => {\n  chat.say('Hello friend', { typing: true }).then(() => (\n    chat.say('So, I’m good at talking about the weather. Other stuff, not so good. If you need help just enter “help.”', { typing: true })\n  ));\n});\n\nbot.hear('color', (payload, chat) => {\n  chat.say({\n    text: 'Favorite color?',\n    quickReplies: [ 'Red', 'Blue', 'Green' ]\n  });\n});\n\nbot.hear('image', (payload, chat) => {\n  chat.say({\n    attachment: 'image',\n    url: 'http://static3.gamespot.com/uploads/screen_medium/1365/13658182/3067965-overwatch-review-promo-20160523_v2.jpg',\n    quickReplies: [ 'Red', 'Blue', 'Green' ]\n  });\n});\n\nbot.hear('button', (payload, chat) => {\n  chat.say({\n    text: 'Select a button',\n    buttons: [ 'Male', 'Female', `Don't wanna say` ]\n  });\n});\n\nbot.hear('convo', (payload, chat) => {\n  chat.conversation(convo => {\n    convo.ask({\n      text: 'Favorite color?',\n      quickReplies: [ 'Red', 'Blue', 'Green' ]\n    }, (payload, convo) => {\n      const text = payload.message.text;\n      convo.say(`Oh your favorite color is ${text}, cool!`);\n      convo.end();\n    }, [\n      {\n        event: 'quick_reply',\n        callback: (payload, convo) => {\n          const text = payload.message.text;\n          convo.say(`Thanks for choosing one of the options. Your favorite color is ${text}`);\n          convo.end();\n        }\n      }\n    ]);\n  });\n});\n\nbot.start();\n"]}